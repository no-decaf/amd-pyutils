#!/usr/bin/env python

import subprocess

from amd.util import config

try:
    import importlib.resources as import_resources
except ImportError:
    # Try importlib_resources which is backported to Python < 3.7.
    import importlib_resources as import_resources

with import_resources.path(config, ".coveragerc") as coveragerc:
    subprocess.run(
        [
            "pytest",
            "--cov=.",
            f"--cov-config={coveragerc}",
            "--cov-report",
            "term-missing",
        ]
    )
